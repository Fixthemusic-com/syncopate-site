---
const steps = [
  { emoji: 'üí¨', text: 'Client messages you on WhatsApp with a question' },
  { emoji: 'üñ•Ô∏è', text: 'You open the dashboard ‚Äî it knows nothing about the conversation' },
  { emoji: '‚å®Ô∏è', text: 'Re-type everything you already discussed' },
  { emoji: 'üîÑ', text: 'Switch back to chat to relay the update' },
  { emoji: 'ü§û', text: 'Hope nothing was lost in translation' },
  { emoji: '‚ôªÔ∏è', text: 'Repeat. Forever.' },
];

const platforms = [
  { name: 'Client Portals', issue: 'You built one. Nobody logs in. The real conversation still happens over email and chat.' },
  { name: 'WhatsApp / Telegram', issue: 'No bots, no commands, no structure. You can\'t program a conversation or stop strangers from messaging your people.' },
  { name: 'Slack', issue: 'Built for internal teams. Every external user costs you per-seat. Not designed for client engagement.' },
  { name: 'Email', issue: 'Threads get buried. Attachments get lost. Nothing is structured or actionable.' },
];
---

<section class="section problem-section" id="problem">
  <div class="container">
    <div class="section-header animate-on-scroll">
      <span class="section-label">The Problem</span>
      <h2>The conversation is where the work happens. Your tools just pretend it doesn't.</h2>
      <p>You already talk to your clients every day. But the tools that track work live somewhere else ‚Äî disconnected from the conversation where decisions are actually made.</p>
    </div>

    <div class="broken-flow animate-on-scroll">
      {steps.map((step, i) => (
        <div class="flow-step" style={`--step-delay: ${i * 0.1}s`}>
          <span class="flow-num">{i + 1}</span>
          <span class="flow-emoji">{step.emoji}</span>
          <p>{step.text}</p>
        </div>
      ))}
    </div>

    <div class="platform-grid animate-on-scroll">
      {platforms.map((p) => (
        <div class="platform-card">
          <h4>{p.name}</h4>
          <p>{p.issue}</p>
        </div>
      ))}
    </div>

    <div class="problem-insight animate-on-scroll">
      <div class="insight-card">
        <h3>The conversation is where your clients already are</h3>
        <p>
          It just needs to be <strong class="text-cyan">smart enough</strong> to answer their questions,
          <strong class="text-amber">programmable enough</strong> to get things done,
          and <strong>yours</strong> ‚Äî not some platform's.
        </p>
      </div>
    </div>
  </div>
</section>

<style>
  .problem-section {
    background: var(--surface-1);
  }

  .broken-flow {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 0.75rem;
    margin-bottom: 5rem;
  }

  .flow-step {
    background: var(--surface-2);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-md);
    padding: 1.5rem 1rem;
    text-align: center;
    position: relative;
    transition: all var(--transition-med);
  }

  .flow-step:hover {
    border-color: rgba(255, 95, 87, 0.3);
    background: rgba(255, 95, 87, 0.04);
  }

  .flow-step:last-child {
    border-color: rgba(255, 95, 87, 0.2);
    background: rgba(255, 95, 87, 0.06);
  }

  .flow-num {
    position: absolute;
    top: -10px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.7rem;
    font-weight: 700;
    background: var(--surface-3);
    color: var(--text-muted);
    width: 22px;
    height: 22px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    border: 1px solid var(--border-subtle);
  }

  .flow-emoji {
    font-size: 1.5rem;
    display: block;
    margin-bottom: 0.75rem;
  }

  .flow-step p {
    font-size: 0.82rem;
    color: var(--text-secondary);
    margin: 0;
    line-height: 1.4;
  }

  .platform-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1.25rem;
    margin-bottom: 4rem;
  }

  .platform-card {
    background: var(--surface-2);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-md);
    padding: 1.75rem;
    transition: all var(--transition-med);
  }

  .platform-card:hover {
    border-color: var(--border-accent);
  }

  .platform-card h4 {
    color: var(--text-primary);
    margin-bottom: 0.5rem;
    font-size: 1.1rem;
  }

  .platform-card p {
    font-size: 0.88rem;
    color: var(--text-muted);
    margin: 0;
    line-height: 1.5;
  }

  .insight-card {
    background: var(--gradient-card);
    border: 1px solid var(--border-accent);
    border-radius: var(--radius-lg);
    padding: 3rem;
    text-align: center;
    max-width: 700px;
    margin: 0 auto;
    box-shadow: var(--shadow-glow-cyan);
  }

  .insight-card h3 {
    margin-bottom: 1rem;
  }

  .insight-card p {
    font-size: 1.1rem;
    line-height: 1.7;
    margin: 0;
  }

  @media (max-width: 960px) {
    .broken-flow {
      grid-template-columns: repeat(3, 1fr);
    }
    .platform-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (max-width: 580px) {
    .broken-flow {
      grid-template-columns: repeat(2, 1fr);
    }
    .platform-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
